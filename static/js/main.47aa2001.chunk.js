(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,a){e.exports=a(72)},44:function(e,t,a){},47:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),i=a.n(c),s=a(3),o=(a(44),a(4)),u=a(26),d=a(1),m=a(5),l=function(e){var t={};return e.forEach(function(e){e.sub_themes.forEach(function(a){a.categories.forEach(function(n){n.indicators.forEach(function(r){t[String(r.id)]={category:n.id,indicator:r.id,subTheme:a.id,theme:e.id}})})})}),t},h=function(e){return{categories:Object(m.a)(e.categories),indicators:new Set(Object(m.a)(e.indicators)),subThemes:Object(m.a)(e.subThemes),themes:Object(m.a)(e.themes)}},p={aux:{},categories:[],data:[],indicators:new Set,subThemes:[],themes:[],status:"PENDING"},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PENDING":return Object(d.a)({},e,{status:"PENDING"});case"FETCH_FULFILLED":return Object(d.a)({},e,{aux:l(t.payload),data:t.payload,status:"OK"});case"FETCH_REJECTED":return Object(d.a)({},e,{status:"ERROR"});case"SET_INDICATORS":var a=t.payload,n=h(e),r=n.categories,c=n.indicators,i=n.subThemes,s=n.themes;return function(e,t){var a=e.aux,n=Object.keys(a);return t.every(function(e){return n.includes(e)})}(e,t.payload)?(a.forEach(function(t){var a=e.aux[t];c.add(a.indicator),r.push(a.category),s.push(a.theme),i.push(a.subTheme)}),Object(d.a)({},e,{categories:r,indicators:c,subThemes:i,themes:s})):Object(d.a)({},e,{status:"NOT_FOUND"});case"SET_INDICATOR":var o=t.payload,u=o.id,m=o.category,b=o.theme,E=o.subTheme,f=h(e),v=f.categories,O=f.indicators,y=f.subThemes,T=f.themes;if(O.has(u)){var g=y.indexOf(E),N=e.categories.indexOf(m),j=T.indexOf(b);O.delete(u),v.splice(N,1),y.splice(g,1),T.splice(j,1)}else O.add(u),v.push(m),y.push(E),T.push(b);return Object(d.a)({},e,{categories:v,indicators:O,subThemes:y,themes:T});default:return e}},E=a(12),f=a.n(E),v=function(e){return function(t){return function(a){t(a);var n=e.getState();switch(a.type){case"FETCH_FULFILLED":var r=f.a.parse(location.search,{ignoreQueryPrefix:!0}).indicators;r&&r.length>0&&e.dispatch({type:"SET_INDICATORS",payload:r});break;case"SET_INDICATOR":var c=f.a.stringify({indicators:Object(m.a)(n.indicators)},{arrayFormat:"brackets"});history.pushState({},"","?".concat(c))}}}},O=[u.a,v],y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,T=o.a.apply(void 0,O),g=Object(o.d)(b,y(T)),N=a(27),j=a(28),I=a(33),w=a(29),S=a(34),C=(a(47),function(e){var t=e.category,a=e.id,n=e.isSelected,c=e.name,i=e.subTheme,s=e.theme;return r.a.createElement("div",{className:n?"indicator selected":"indicator","data-category":t,"data-id":a,"data-sub-theme":i,"data-theme":s},c)}),_=Object(s.b)(function(e,t){var a=e.indicators;return Object(d.a)({},t,{isSelected:a.has(t.id)})})(C),k=function(e){var t=e.id,a=e.indicators,n=e.isSelected,c=e.name,i=e.subTheme,s=e.theme;return r.a.createElement("div",{className:"category"},r.a.createElement("div",{className:n?"name selected":"name"},c),r.a.createElement("div",{className:"indicators"},a.map(function(e){return e&&r.a.createElement(_,Object.assign({},e,{category:t,key:e.id,subTheme:i,theme:s}))})))},D=Object(s.b)(function(e,t){var a=e.categories;return Object(d.a)({},t,{isSelected:a.includes(t.id)})})(k),F=function(e){var t=e.name,a=e.id,n=e.categories,c=e.theme,i=e.isSelected;return r.a.createElement("div",{className:"subTheme"},r.a.createElement("div",{className:i?"name selected":"name"},t),r.a.createElement("div",{className:"categories"},n.map(function(e){return e&&r.a.createElement(D,Object.assign({},e,{key:e.id,subTheme:a,theme:c}))})))},x=Object(s.b)(function(e,t){var a=e.subThemes;return Object(d.a)({},t,{isSelected:a.includes(t.id)})})(F),R=function(e){var t=e.name,a=e.id,n=e.sub_themes,c=e.isSelected;return r.a.createElement("div",{className:"theme"},r.a.createElement("div",{className:c?"name selected":"name"},t),r.a.createElement("div",{className:"subThemes"},n.map(function(e){return e&&r.a.createElement(x,Object.assign({},e,{key:e.id,theme:a}))})))},L=Object(s.b)(function(e,t){var a=e.themes;return Object(d.a)({},t,{isSelected:a.includes(t.id)})})(R),H=function(e){function t(){return Object(N.a)(this,t),Object(I.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.props.getContent()}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.onClick;switch(e.status){case"PENDING":return r.a.createElement("p",null,"loading...");case"NOT_FOUND":return r.a.createElement("p",null,"Indicator not found");case"ERROR":return r.a.createElement("p",null,"Connection error :(");case"OK":return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"header"},r.a.createElement("div",null,"Theme"),r.a.createElement("div",null,"SubTheme"),r.a.createElement("div",null,"Category"),r.a.createElement("div",null,"Indicator")),r.a.createElement("div",{onClick:function(e){return a(e.target)}},t.map(function(e){return e&&r.a.createElement(L,Object.assign({},e,{key:e.id}))})))}}}]),t}(n.Component),P=a(13),A=a.n(P),U=a(30),G=a(31),J=a.n(G),B=a(32),K=a.n(B),M=function(e){return e({type:"FETCH_PENDING"}),J.a.get("https://kf6xwyykee.execute-api.us-east-1.amazonaws.com/production/tree/input")},W=Object(s.b)(function(e){return e},function(e){return{getContent:function(){return e(function(){var e=Object(U.a)(A.a.mark(function e(t){var a;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K()(function(){return M(t)},{retries:2});case 3:a=e.sent,t({type:"FETCH_FULFILLED",payload:a.data}),e.next=12;break;case 7:throw e.prev=7,e.t0=e.catch(0),t({type:"FETCH_REJECTED"}),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}())},onClick:function(t){var a=t.dataset,n=a.id,r=a.category,c=a.subTheme,i=a.theme;if(n)return e({type:"SET_INDICATOR",payload:{category:parseInt(r),id:parseInt(n),subTheme:parseInt(c),theme:parseInt(i)}})}}})(H);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(s.a,{store:g},r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[35,1,2]]]);
//# sourceMappingURL=main.47aa2001.chunk.js.map