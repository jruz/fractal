(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,a){e.exports=a(71)},43:function(e,t,a){},46:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),i=a.n(c),s=a(3),o=(a(43),a(4)),u=a(25),d=a(1),l=a(5),m=function(e){var t={};return e.forEach(function(e){e.sub_themes.forEach(function(a){a.categories.forEach(function(n){n.indicators.forEach(function(r){t[String(r.id)]={category:n.id,indicator:r.id,subTheme:a.id,theme:e.id}})})})}),t},h={data:[],aux:{},categories:[],indicators:new Set,subThemes:[],themes:[],status:"PENDING"},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET":return Object(d.a)({},h);case"FETCH_PENDING":return Object(d.a)({},e,{status:"PENDING"});case"FETCH_FULFILLED":return Object(d.a)({},e,{aux:m(t.payload),data:t.payload,status:"OK"});case"FETCH_REJECTED":return Object(d.a)({},e,{status:"ERROR"});case"SET_INDICATORS":var a=t.payload,n=[],r=new Set,c=[],i=[];return function(e,t){var a=e.aux,n=Object.keys(a);return t.every(function(e){return n.includes(e)})}(e,t.payload)?(a.forEach(function(t){var a=e.aux[t];r.add(a.indicator),n.push(a.category),i.push(a.theme),c.push(a.subTheme)}),Object(d.a)({},e,{categories:n,indicators:r,subThemes:c,themes:i})):Object(d.a)({},e,{status:"NOT_FOUND"});case"SET_INDICATOR":var s=t.payload,o=s.id,u=s.category,p=s.theme,E=s.subTheme,b=function(e){return{categories:Object(l.a)(e.categories),indicators:new Set(Object(l.a)(e.indicators)),subThemes:Object(l.a)(e.subThemes),themes:Object(l.a)(e.themes)}}(e),f=b.categories,v=b.indicators,O=b.subThemes,T=b.themes;if(v.has(o)){var y=O.indexOf(E),g=e.categories.indexOf(u),j=T.indexOf(p);v.delete(o),f.splice(g,1),O.splice(y,1),T.splice(j,1)}else v.add(o),f.push(u),O.push(E),T.push(p);return Object(d.a)({},e,{categories:f,indicators:v,subThemes:O,themes:T});default:return e}},E=a(11),b=a.n(E),f=function(e){return function(t){return function(a){t(a);var n=e.getState();switch(a.type){case"NAVIGATE":case"FETCH_FULFILLED":var r=b.a.parse(window.location.search,{ignoreQueryPrefix:!0}).indicators;r&&r.length>0&&e.dispatch({type:"SET_INDICATORS",payload:r});break;case"SET_INDICATOR":var c=b.a.stringify({indicators:Object(l.a)(n.indicators)},{arrayFormat:"brackets"});window.history.pushState({},"","?".concat(c))}}}},v=[u.a,f],O=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,T=o.a.apply(void 0,v),y=Object(o.d)(p,O(T)),g=a(26),j=a(27),N=a(32),w=a(28),S=a(33),I=(a(46),function(e){var t=e.category,a=e.id,n=e.isSelected,c=e.name,i=e.subTheme,s=e.theme;return r.a.createElement("div",{className:n?"indicator selected":"indicator","data-category":t,"data-id":a,"data-sub-theme":i,"data-theme":s},c)}),C=Object(s.b)(function(e,t){var a=e.indicators;return Object(d.a)({},t,{isSelected:a.has(t.id)})})(I),_=function(e){var t=e.id,a=e.indicators,n=e.isSelected,c=e.name,i=e.subTheme,s=e.theme;return r.a.createElement("div",{className:"category"},r.a.createElement("div",{className:n?"name selected":"name"},c),r.a.createElement("div",{className:"indicators"},a.map(function(e){return e&&r.a.createElement(C,Object.assign({},e,{category:t,key:e.id,subTheme:i,theme:s}))})))},k=Object(s.b)(function(e,t){var a=e.categories;return Object(d.a)({},t,{isSelected:a.includes(t.id)})})(_),D=function(e){var t=e.name,a=e.id,n=e.categories,c=e.theme,i=e.isSelected;return r.a.createElement("div",{className:"subTheme"},r.a.createElement("div",{className:i?"name selected":"name"},t),r.a.createElement("div",{className:"categories"},n.map(function(e){return e&&r.a.createElement(k,Object.assign({},e,{key:e.id,subTheme:a,theme:c}))})))},F=Object(s.b)(function(e,t){var a=e.subThemes;return Object(d.a)({},t,{isSelected:a.includes(t.id)})})(D),R=function(e){var t=e.name,a=e.id,n=e.sub_themes,c=e.isSelected;return r.a.createElement("div",{className:"theme"},r.a.createElement("div",{className:c?"name selected":"name"},t),r.a.createElement("div",{className:"subThemes"},n.map(function(e){return e&&r.a.createElement(F,Object.assign({},e,{key:e.id,theme:a}))})))},x=Object(s.b)(function(e,t){var a=e.themes;return Object(d.a)({},t,{isSelected:a.includes(t.id)})})(R),A=function(e){function t(){return Object(g.a)(this,t),Object(N.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getContent(),window.onpopstate=function(){return e.props.onPopState()}}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.onClick;switch(e.status){case"NOT_FOUND":return r.a.createElement("p",null,"Indicator not found");case"ERROR":return r.a.createElement("p",null,"Connection error :(");case"OK":return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"header"},r.a.createElement("div",null,"Theme"),r.a.createElement("div",null,"SubTheme"),r.a.createElement("div",null,"Category"),r.a.createElement("div",null,"Indicator")),r.a.createElement("div",{onClick:function(e){return a(e.target)}},t.map(function(e){return e&&r.a.createElement(x,Object.assign({},e,{key:e.id}))})));default:return r.a.createElement("p",null,"loading...")}}}]),t}(n.Component),L=a(12),P=a.n(L),H=a(29),G=a(30),U=a.n(G),J=a(31),V=a.n(J),B=function(e){return e({type:"FETCH_PENDING"}),U.a.get("https://kf6xwyykee.execute-api.us-east-1.amazonaws.com/production/tree/input")},K=Object(s.b)(function(e){return e},function(e){return{getContent:function(){return e(function(){var e=Object(H.a)(P.a.mark(function e(t){var a;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V()(function(){return B(t)},{retries:2});case 3:a=e.sent,t({type:"FETCH_FULFILLED",payload:a.data}),e.next=12;break;case 7:throw e.prev=7,e.t0=e.catch(0),t({type:"FETCH_REJECTED"}),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}())},onClick:function(t){var a=t.dataset,n=a.id,r=a.category,c=a.subTheme,i=a.theme;if(n)return e({type:"SET_INDICATOR",payload:{category:parseInt(r),id:parseInt(n),subTheme:parseInt(c),theme:parseInt(i)}})},onPopState:function(){return e({type:"NAVIGATE"})}}})(A);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(s.a,{store:y},r.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[34,1,2]]]);
//# sourceMappingURL=main.03497684.chunk.js.map